{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@malago/flarum-achievements/./src/common/models/Achievement.js","webpack://@malago/flarum-achievements/./src/common/models/AchievementUser.js","webpack://@malago/flarum-achievements/./src/common/registerModels.js","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['Model']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['models/User']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['utils/mixin']\"","webpack://@malago/flarum-achievements/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@malago/flarum-achievements/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@malago/flarum-achievements/webpack/bootstrap","webpack://@malago/flarum-achievements/webpack/runtime/compat get default export","webpack://@malago/flarum-achievements/webpack/runtime/define property getters","webpack://@malago/flarum-achievements/webpack/runtime/hasOwnProperty shorthand","webpack://@malago/flarum-achievements/webpack/runtime/make namespace object","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['extend']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['components/CommentPost']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['common/Application']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['app']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['helpers/icon']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['components/Modal']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['utils/ItemList']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['components/Button']\"","webpack://@malago/flarum-achievements/./src/forum/modals/NewAchievementModal.js","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['components/IndexPage']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['components/Page']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['common/components/Page']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['components/Link']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['helpers/listItems']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['helpers/humanTime']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['components/Tooltip']\"","webpack://@malago/flarum-achievements/./src/forum/components/AchievementsPage.js","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['components/LinkButton']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['components/UserCard']\"","webpack://@malago/flarum-achievements/./src/forum/index.js"],"sourcesContent":["/*\r\n *  Achievements Extension for Flarum\r\n *  Author: Miguel A. Lago\r\n *\r\n *  This program is free software: you can redistribute it and/or modify\r\n *  it under the terms of the GNU General Public License as published by\r\n *  the Free Software Foundation, either version 3 of the License, or\r\n *  (at your option) any later version.\r\n *\r\n *  This program is distributed in the hope that it will be useful,\r\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n *  GNU General Public License for more details.\r\n */\r\n\r\nimport Model from 'flarum/Model';\r\nimport mixin from 'flarum/utils/mixin';\r\n\r\nexport default class Achievement extends Model {}\r\n \r\nObject.assign(Achievement.prototype, {\r\n  id: Model.attribute(\"id\"),\r\n  name: Model.attribute(\"name\"),\r\n  description: Model.attribute('description'),\r\n  computation: Model.attribute('computation'),\r\n  points: Model.attribute('points'),\r\n  rectangle: Model.attribute('rectangle'),\r\n  image: Model.attribute('image'),\r\n  new: Model.attribute('new'),\r\n  active: Model.attribute('active'),\r\n  hidden: Model.attribute('hidden'),\r\n});","/*\r\n *  Achievements Extension for Flarum\r\n *  Author: Miguel A. Lago\r\n *\r\n *  This program is free software: you can redistribute it and/or modify\r\n *  it under the terms of the GNU General Public License as published by\r\n *  the Free Software Foundation, either version 3 of the License, or\r\n *  (at your option) any later version.\r\n *\r\n *  This program is distributed in the hope that it will be useful,\r\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n *  GNU General Public License for more details.\r\n */\r\n\r\nimport Model from 'flarum/Model';\r\n\r\nexport default class AchievementUser extends Model {}\r\n\r\nObject.assign(AchievementUser.prototype, {\r\n  achievement_id: Model.attribute(\"achievement_id\"),\r\n  user_id: Model.attribute('user_id'),\r\n  new: Model.attribute('new')\r\n});","/*\r\n *  Achievements Extension for Flarum\r\n *  Author: Miguel A. Lago\r\n *\r\n *  This program is free software: you can redistribute it and/or modify\r\n *  it under the terms of the GNU General Public License as published by\r\n *  the Free Software Foundation, either version 3 of the License, or\r\n *  (at your option) any later version.\r\n *\r\n *  This program is distributed in the hope that it will be useful,\r\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n *  GNU General Public License for more details.\r\n */\r\n\r\nimport Model from \"flarum/Model\";\r\nimport User from \"flarum/models/User\";\r\nimport Achievement from \"./models/Achievement\";\r\nimport AchievementUser from \"./models/AchievementUser\";\r\n\r\nexport default function registerModels() {\r\n  User.prototype.achievements = Model.hasMany('achievements','achievement_user');\r\n  User.prototype.achievement_user = Model.hasMany('achievement_user');\r\n\r\n  app.store.models.achievements = Achievement;\r\n  app.store.models.achievement_user = AchievementUser;\r\n}","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['models/User'];","module.exports = flarum.core.compat['utils/mixin'];","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/CommentPost'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Application'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Button'];","/*\r\n *  Achievements Extension for Flarum\r\n *  Author: Miguel A. Lago\r\n *\r\n *  This program is free software: you can redistribute it and/or modify\r\n *  it under the terms of the GNU General Public License as published by\r\n *  the Free Software Foundation, either version 3 of the License, or\r\n *  (at your option) any later version.\r\n *\r\n *  This program is distributed in the hope that it will be useful,\r\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n *  GNU General Public License for more details.\r\n */\r\n\r\nimport app from 'flarum/app';\r\nimport icon from \"flarum/helpers/icon\";\r\nimport Modal from 'flarum/components/Modal';\r\nimport ItemList from \"flarum/utils/ItemList\";\r\nimport Button from \"flarum/components/Button\";\r\n\r\nexport default class NewAchievementModal extends Modal {\r\n\r\n\r\n    title() {\r\n        return app.translator.trans('malago-achievements.forum.new_achievement_title');\r\n    }\r\n\r\n    oninit(vnode) {\r\n        super.oninit(vnode);\r\n    }\r\n\r\n    fields() {\r\n        const items = new ItemList();\r\n        for (var i = 0; i < this.attrs.achievements.length; i++) {\r\n            var rectangle = this.attrs.achievements[i].rectangle.split(',');\r\n\r\n            if (this.attrs.achievements[i].image.includes(\"http\")) {\r\n                var style = \"background:url(\" + this.attrs.achievements[i].image + \");\\\r\n                    background-position:-\"+ rectangle[0] + \"px -\" + rectangle[1] + \"px;\\\r\n                    height:\"+ rectangle[2] + \"px;\\\r\n                    width:\"+ rectangle[3] + \"px;\";\r\n\r\n                items.add(\r\n                    \"image\" + i,\r\n                    <div className=\"Form-group\">\r\n                        <span class='Badge Achievement' style={style}></span>\r\n                    </div>,\r\n                    -10\r\n                );\r\n            } else {\r\n                items.add(\r\n                    \"image\" + i,\r\n                    <div className=\"Form-group\">\r\n                        <span class='Badge Achievement--Icon'>{icon(this.attrs.achievements[i].image)}</span>\r\n                    </div>,\r\n                    -10\r\n                );\r\n            }\r\n\r\n            items.add(\r\n                \"name\" + i,\r\n                <div className=\"Form-group\">\r\n                    <h1>{this.attrs.achievements[i].name}</h1>\r\n                </div>,\r\n                -10\r\n            );\r\n\r\n            items.add(\r\n                \"description\" + i,\r\n                <div className=\"Form-group\">\r\n                    <h3>{this.attrs.achievements[i].description}</h3>\r\n                </div>,\r\n                -10\r\n            );\r\n        }\r\n\r\n        items.add(\r\n            \"close\",\r\n            <div className=\"NewAchievementModal--Button\">\r\n                {Button.component(\r\n                    {\r\n                        type: \"button\",\r\n                        className: \"Button Button--primary\",\r\n                        onclick: this.hide.bind(this),\r\n                    },\r\n                    app.translator.trans(\r\n                        \"malago-achievements.forum.new_achievement_close\"\r\n                    )\r\n                )}\r\n\r\n            </div>,\r\n            -10\r\n        );\r\n\r\n        return items;\r\n    }\r\n\r\n    // Hide the footer completely\r\n    footer() {\r\n        return null;\r\n    }\r\n\r\n    content() {\r\n        if (this.loading) {\r\n            return (\r\n                <div className=\"Modal-body\">\r\n                    <div className=\"Form\">\r\n                        <div className=\"container\">\r\n                            <LoadingIndicator />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className=\"Modal-body\">\r\n                <div className=\"Modal--New-Achievement\">{this.fields().toArray()}</div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Instead of hitting /register (which would change which user is connected in this session)\r\n    // We just hit the API that's already used behind the scenes when registering\r\n    // Doing it this way skips connecting the new account and just returns the new user data\r\n    // onsubmit(e) {\r\n    //     e.preventDefault();\r\n\r\n    //     this.loading = true;\r\n\r\n    //     app.request({\r\n    //         url: app.forum.attribute('apiUrl') + '/users',\r\n    //         method: 'POST',\r\n    //         body: {\r\n    //             data: {\r\n    //                 attributes: this.submitData(),\r\n    //             },\r\n    //         },\r\n    //         errorHandler: this.onerror.bind(this)\r\n    //     }).then(\r\n    //         payload => {\r\n    //             const user = app.store.pushPayload(payload);\r\n\r\n    //             // Add the missing groups relationship we can't include from the CreateUserController\r\n    //             // Without this there's an error trying to access the user edit modal just after the redirect to the profile\r\n    //             user.pushData({\r\n    //                 relationships: {\r\n    //                     groups: {\r\n    //                         data: [],\r\n    //                     },\r\n    //                 },\r\n    //             });\r\n\r\n    //             m.route.set(app.route.user(user));\r\n    //         },\r\n    //         this.loaded.bind(this)\r\n    //     );\r\n    // }\r\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['helpers/listItems'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['helpers/humanTime'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Tooltip'];","import Page from 'flarum/common/components/Page';\r\nimport IndexPage from 'flarum/components/IndexPage';\r\nimport Link from 'flarum/components/Link';\r\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\r\nimport listItems from 'flarum/helpers/listItems';\r\nimport humanTime from 'flarum/helpers/humanTime';\r\nimport Tooltip from \"flarum/components/Tooltip\";\r\n\r\nexport default class AchievementsPage extends Page {\r\n  oninit(vnode) {\r\n    this.loading = true;\r\n    super.oninit(vnode);\r\n    if (!app.session.user) {\r\n        m.route.set('/');\r\n    }\r\n    this.achievements_ids = [];\r\n    app.data.resources.map(item => { if (item.type == \"achievement_user\") this.achievements_ids.push(item.attributes.id) });\r\n\r\n    this.achievements_all = [];\r\n    this.html_user = \"\";\r\n    this.html_all = \"\";\r\n    this.points = 0;\r\n    this.hidden_count = 0;\r\n    app.store.find('achievements').then(val => {\r\n      this.achievements_all = val;\r\n\r\n      this.achievements_all.map(item => {\r\n        var rectangle = item.rectangle().split(',');\r\n        var html = \"\";\r\n        if (item.image().includes(\"http\")) {\r\n          var style = \"background:url(\" + item.image() + \");\\\r\n            background-position:-\"+ rectangle[0] + \"px -\" + rectangle[1] + \"px;\\\r\n            height:\"+ rectangle[2] + \"px;\\\r\n            width:\"+ rectangle[3] + \"px;\";\r\n          html = '<li>\\\r\n              <div class=\"AchievementsList-Item\">\\\r\n                <div class=\"Badge Achievement\" style=\"'+ style + '\" data-toggle=\"tooltip\" title=' + item.name() +'></div>\\\r\n                  <table class=\"AchievementsList-info\"><tr><td class=\"AchievementsList-name\">'+ item.name() + '</td><td class=\"AchievementsList-points\">' + app.translator.trans(\"malago-achievements.forum.achievement_points\") + \": \" + item.points() +'</td></tr></table>\\\r\n                  <div class=\"AchievementsList-description\">'+ item.description() +'</div>\\\r\n              </div>\\\r\n            </li>';\r\n        } else {\r\n          html='<li>\\\r\n              <div class=\"AchievementsList-Item\">\\\r\n                <div class=\"Badge Achievement--Icon\"><i class=\"icon ' + item.image()+'\"></i></div>\\\r\n                <table class=\"AchievementsList-info\"><tr><td class=\"AchievementsList-name\">'+ item.name() + '</td><td class=\"AchievementsList-points\">' + app.translator.trans(\"malago-achievements.forum.achievement_points\") + \": \" + item.points() +'</td></tr></table>\\\r\n                <div class=\"AchievementsList-description\">'+ item.description() +'</div>\\\r\n              </div>\\\r\n            </li>';\r\n        }\r\n        \r\n        if (this.achievements_ids.indexOf(parseInt(item.data.id)) !== -1) {\r\n          this.html_user += html;\r\n          this.points += parseFloat(item.points());\r\n        }else if (item.hidden() == 0)\r\n          this.html_all += html;\r\n        else\r\n          this.hidden_count += 1;\r\n        \r\n      });\r\n\r\n      this.loading = false;\r\n      m.redraw();\r\n    });\r\n    // this.achievements = app.forum.data.relationships.achievements_all.data;\r\n  }\r\n  view() {\r\n    if (this.loading) {\r\n      return <LoadingIndicator />;\r\n    }\r\n    return (\r\n      <div className=\"IndexPage\">\r\n        {IndexPage.prototype.hero()}\r\n        <div className=\"container\">\r\n          <div className=\"sideNavContainer\">\r\n            <nav className=\"IndexPage-nav sideNav\">\r\n              <ul>{listItems(IndexPage.prototype.sidebarItems().toArray())}</ul>\r\n            </nav>\r\n            <div className=\"IndexPage-results sideNavOffset\">\r\n              <h2>{app.translator.trans(\"malago-achievements.forum.your_achievements\")}</h2>\r\n              <div className=\"AchievementsList\">\r\n                <ul className=\"AchievementsList-achievements\">\r\n                  {m.trust(this.html_user)}\r\n                  <li>\r\n                    <div class=\"AchievementsList-Item\">\r\n                      <div className=\"AchievementsList-points AchievementsList-total\" style=\"color: black; border: 2px solid black;\">{app.translator.trans(\"malago-achievements.forum.achievement_total_points\") + \": \"+this.points}</div>\r\n                    </div>  \r\n                  </li>\r\n                  </ul>\r\n              </div>\r\n                          \r\n              <h2>{app.translator.trans(\"malago-achievements.forum.other_achievements\")}</h2>\r\n              <div className=\"AchievementsList AchievementsList-Other\">\r\n                <ul className=\"AchievementsList-achievements\">\r\n                  {m.trust(this.html_all)}\r\n                  </ul>\r\n              </div>\r\n\r\n              <div className=\"AchievementsHidden\">{this.hidden_count>0?app.translator.trans(\"malago-achievements.forum.hidden_achievements\")+\": \"+this.hidden_count:\"\"}</div>\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n  oncreate(vnode) {\r\n    super.oncreate(vnode);\r\n\r\n    app.setTitle(app.translator.trans(\"malago-achievements.forum.list_heading\"));\r\n    app.setTitleCount(0);\r\n  }\r\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/UserCard'];","/*\r\n *  Achievements Extension for Flarum\r\n *  Author: Miguel A. Lago\r\n *\r\n *  This program is free software: you can redistribute it and/or modify\r\n *  it under the terms of the GNU General Public License as published by\r\n *  the Free Software Foundation, either version 3 of the License, or\r\n *  (at your option) any later version.\r\n *\r\n *  This program is distributed in the hope that it will be useful,\r\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n *  GNU General Public License for more details.\r\n */\r\n\r\nconst { default: registerModels } = require(\"../common/registerModels\");\r\n\r\nimport { extend } from 'flarum/extend';\r\nimport CommentPost from 'flarum/components/CommentPost';\r\nimport Application from 'flarum/common/Application';\r\nimport NewAchievementModal from './modals/NewAchievementModal';\r\nimport IndexPage from 'flarum/components/IndexPage'\r\nimport Page from 'flarum/components/Page'\r\nimport AchievementsPage from './components/AchievementsPage'\r\nimport LinkButton from 'flarum/components/LinkButton';\r\nimport Tooltip from \"flarum/components/Tooltip\";\r\nimport UserCard from 'flarum/components/UserCard'\r\n\r\napp.initializers.add('malago-achievements', app => {\r\n  app.routes['achievements'] = { path: '/achievements', component: AchievementsPage };\r\n  extend(IndexPage.prototype, 'navItems', function (items) {\r\n    const here = app.forum.attribute('malago-achievements.link-left-column');\r\n\r\n    if (!app.session.user || here != 1) {\r\n      return;\r\n    }\r\n    items.add('achievements', <LinkButton icon=\"fas fa-trophy\" href={app.route('achievements')}>\r\n      {app.translator.trans(\"malago-achievements.forum.list_heading\")}\r\n    </LinkButton>\r\n      , -11);\r\n  });\r\n\r\n  registerModels();\r\n\r\n  extend(UserCard.prototype, 'view', function (element) {\r\n    var points = 0;\r\n\r\n    const here = app.forum.attribute('malago-achievements.show-user-card');\r\n\r\n    var list = m(\"div.UserCard-Achievement-list\");\r\n\r\n    if (here == \"1\" && element.attrs.className.includes(\"UserCard--popover\")) {\r\n      var achievements = this.attrs.user.achievements();\r\n      if (achievements !== undefined && achievements !== null) {\r\n        Object.keys(achievements).forEach(obj => {\r\n          var item = achievements[obj].data.attributes;\r\n          var rectangle = item.rectangle.split(',');\r\n          if (item.image.includes(\"http\")) {\r\n            var style = \"background:url(\" + item.image + \");\\\r\n              background-position:-\"+ rectangle[0] + \"px -\" + rectangle[1] + \"px;\\\r\n              height:\"+ rectangle[2] + \"px;\\\r\n              width:\"+ rectangle[3] + \"px;\\\r\n              margin: -\"+ (rectangle[3] / 4 - 4) + \"px;\";\r\n            list.children.push(m(Tooltip, { text: item.name },\r\n              m(\"span.Badge.Achievement\", { style: style }, \"\"))\r\n            );\r\n          } else {\r\n            list.children.push(m(Tooltip, { text: item.name }, m(\"span.Badge.Achievement--Icon\",\r\n              m(\"i.icon.\" + item.image))\r\n            ));\r\n          }\r\n\r\n          points += item.points;\r\n        });\r\n        if (list.children.length > 0 && points > 0) {\r\n          list.children.push(m(Tooltip, { text: app.translator.trans(\"malago-achievements.forum.achievement_points\") }, m(\"span.Achievement--Points\", app.translator.trans(\r\n            \"malago-achievements.forum.achievement_points\") + \": \", m(\"span.Achievement--Points--Number\", points))));\r\n        }\r\n        element.children.push(list);\r\n      }\r\n    }\r\n  })\r\n\r\n  extend(CommentPost.prototype, 'view', function (comment) {\r\n    var points = 0;\r\n    //comment.children[0].children[2].children.splice(0,0, m(\"div.Achievements--User\"));\r\n    const here = app.forum.attribute('malago-achievements.show-post-footer');\r\n\r\n    if (here == \"1\" && !this.attrs.post.data.attributes.isHidden) {\r\n      this.attrs.post.data.attributes.achievements.forEach(function (item, index) {\r\n        var rectangle = item.rectangle.split(',');\r\n        if (item.image.includes(\"http\")) {\r\n          var style = \"background:url(\" + item.image + \");\\\r\n            background-position:-\"+ rectangle[0] + \"px -\" + rectangle[1] + \"px;\\\r\n            height:\"+ rectangle[2] + \"px;\\\r\n            width:\"+ rectangle[3] + \"px;\\\r\n            margin: -\"+ (rectangle[3] / 4 - 4) + \"px;\";\r\n\r\n          comment.children[0].children[2].children.push(m(Tooltip, { text: item.name },\r\n            m(\"span.Badge.Achievement\", { style: style }, \"\"))\r\n          );\r\n        } else {\r\n          comment.children[0].children[2].children.push(m(Tooltip, { text: item.name }, m(\"span.Badge.Achievement--Icon\",\r\n            m(\"i.icon.\" + item.image))\r\n          ));\r\n        }\r\n\r\n        points += item.points;\r\n      });\r\n      if (comment.children[0].children[2].children.length > 0 && points > 0) {\r\n        comment.children[0].children[2].children.push(m(Tooltip, { text: app.translator.trans(\"malago-achievements.forum.achievement_points\") }, m(\"span.Achievement--Points\", app.translator.trans(\r\n          \"malago-achievements.forum.achievement_points\") + \": \", m(\"span.Achievement--Points--Number\", points))));\r\n      }\r\n    }\r\n  });\r\n\r\n  extend(Application.prototype, 'request', function (promise) {\r\n    if (promise) {\r\n      promise.then(function (data) {\r\n        if (typeof data.new_achievements === \"string\")\r\n          data.new_achievements = JSON.parse(data.new_achievements);\r\n\r\n        if (data && data.new_achievements !== undefined && data.new_achievements !== null && data.new_achievements.length > 0) {\r\n          app.modal.show(NewAchievementModal, { achievements: data.new_achievements });\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n  extend(Page.prototype, 'oncreate', function (promise) {\r\n    if (app.session.user !== undefined && app.session.user !== null) {\r\n      setTimeout(function () {\r\n        var new_achievements = app.session.user.achievements();\r\n\r\n        if (new_achievements !== undefined && new_achievements !== null && new_achievements.length > 0) {\r\n          var only_new_achievements = [];\r\n          for (var i = 0; i < new_achievements.length; i++) {\r\n            if (new_achievements[i].data.attributes.new == 1) {\r\n              only_new_achievements.push(new_achievements[i].data.attributes)\r\n              new_achievements[i].save({ new: 0, user_id: app.session.user.data.id });\r\n            }\r\n          }\r\n          if (only_new_achievements.length > 0)\r\n            app.modal.show(NewAchievementModal, { achievements: only_new_achievements });\r\n        }\r\n      }, 1000);\r\n    }\r\n  });\r\n\r\n});\r\n"],"names":["Achievement","_Model","apply","arguments","_inheritsLoose","Model","Object","assign","prototype","id","name","description","computation","points","rectangle","image","new","active","hidden","AchievementUser","achievement_id","user_id","registerModels","User","achievements","achievement_user","app","store","models","module","exports","flarum","core","compat","t","o","create","constructor","setPrototypeOf","_setPrototypeOf","e","bind","__proto__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","key","defineProperty","enumerable","get","obj","prop","hasOwnProperty","call","r","Symbol","toStringTag","value","NewAchievementModal","_Modal","_proto","title","trans","oninit","vnode","fields","items","ItemList","i","this","attrs","length","split","includes","style","add","m","className","class","icon","Button","type","onclick","hide","footer","content","loading","LoadingIndicator","toArray","Modal","AchievementsPage","_Page","_this","session","user","route","set","achievements_ids","data","resources","map","item","push","attributes","achievements_all","html_user","html_all","hidden_count","find","then","val","html","translator","indexOf","parseInt","parseFloat","redraw","view","IndexPage","hero","listItems","sidebarItems","trust","oncreate","setTitle","setTitleCount","Page","require","initializers","routes","path","component","extend","here","forum","attribute","LinkButton","href","UserCard","element","list","keys","forEach","children","Tooltip","text","CommentPost","comment","post","isHidden","index","Application","promise","new_achievements","JSON","parse","modal","show","setTimeout","only_new_achievements","save"],"sourceRoot":""}