{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@malago/flarum-achievements/webpack/bootstrap","webpack://@malago/flarum-achievements/webpack/runtime/compat get default export","webpack://@malago/flarum-achievements/webpack/runtime/define property getters","webpack://@malago/flarum-achievements/webpack/runtime/hasOwnProperty shorthand","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['admin/app']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['Model']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['models/User']\"","webpack://@malago/flarum-achievements/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@malago/flarum-achievements/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['utils/mixin']\"","webpack://@malago/flarum-achievements/./src/common/models/Achievement.js","webpack://@malago/flarum-achievements/./src/common/models/AchievementUser.js","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['components/ExtensionPage']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['helpers/icon']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['components/Modal']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['components/Button']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['components/Checkbox']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['components/Tooltip']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['utils/ItemList']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['utils/Stream']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['common/Component']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['components/Dropdown']\"","webpack://@malago/flarum-achievements/./src/admin/components/GroupSelector.js","webpack://@malago/flarum-achievements/./src/admin/components/AchievementModal.js","webpack://@malago/flarum-achievements/./src/admin/components/AchievementUserModal.js","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['utils/saveSettings']\"","webpack://@malago/flarum-achievements/external root \"flarum.core.compat['components/Switch']\"","webpack://@malago/flarum-achievements/./src/admin/components/AchievementsPage.js","webpack://@malago/flarum-achievements/./src/admin/index.js","webpack://@malago/flarum-achievements/./src/common/registerModels.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['models/User'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/mixin'];","/*\r\n *  Achievements Extension for Flarum\r\n *  Author: Miguel A. Lago\r\n *\r\n *  This program is free software: you can redistribute it and/or modify\r\n *  it under the terms of the GNU General Public License as published by\r\n *  the Free Software Foundation, either version 3 of the License, or\r\n *  (at your option) any later version.\r\n *\r\n *  This program is distributed in the hope that it will be useful,\r\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n *  GNU General Public License for more details.\r\n */\r\n\r\nimport Model from 'flarum/Model';\r\nimport mixin from 'flarum/utils/mixin';\r\n\r\nexport default class Achievement extends Model {}\r\n \r\nObject.assign(Achievement.prototype, {\r\n  id: Model.attribute(\"id\"),\r\n  name: Model.attribute(\"name\"),\r\n  description: Model.attribute('description'),\r\n  computation: Model.attribute('computation'),\r\n  points: Model.attribute('points'),\r\n  rectangle: Model.attribute('rectangle'),\r\n  image: Model.attribute('image'),\r\n  new: Model.attribute('new'),\r\n  active: Model.attribute('active'),\r\n  hidden: Model.attribute('hidden'),\r\n});","/*\r\n *  Achievements Extension for Flarum\r\n *  Author: Miguel A. Lago\r\n *\r\n *  This program is free software: you can redistribute it and/or modify\r\n *  it under the terms of the GNU General Public License as published by\r\n *  the Free Software Foundation, either version 3 of the License, or\r\n *  (at your option) any later version.\r\n *\r\n *  This program is distributed in the hope that it will be useful,\r\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n *  GNU General Public License for more details.\r\n */\r\n\r\nimport Model from 'flarum/Model';\r\n\r\nexport default class AchievementUser extends Model {}\r\n\r\nObject.assign(AchievementUser.prototype, {\r\n  achievement_id: Model.attribute(\"achievement_id\"),\r\n  user_id: Model.attribute('user_id'),\r\n  new: Model.attribute('new')\r\n});","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Checkbox'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Tooltip'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/Stream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Dropdown'];","/*\r\n *  Achievements Extension for Flarum\r\n *  Author: Miguel A. Lago\r\n *\r\n *  This program is free software: you can redistribute it and/or modify\r\n *  it under the terms of the GNU General Public License as published by\r\n *  the Free Software Foundation, either version 3 of the License, or\r\n *  (at your option) any later version.\r\n *\r\n *  This program is distributed in the hope that it will be useful,\r\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n *  GNU General Public License for more details.\r\n */\r\n\r\nimport Component from \"flarum/common/Component\";\r\nimport Button from \"flarum/components/Button\";\r\nimport Dropdown from \"flarum/components/Dropdown\";\r\nimport app from 'flarum/admin/app'\r\n\r\nexport default class GroupSelector extends Component {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n  }\r\n\r\n  oncreate(vnode) {\r\n    super.oncreate(vnode);\r\n  }\r\n\r\n  view() {\r\n    const variables=[\"manual\",\"posts\", \"likes\", \"selflikes\", \"discussions\", \"edits\", \"avatar\", \"comments\", \"contains\", \"meanwords\", \"tagposts\", \"years\"];\r\n    const label = app.translator.trans(\"malago-achievements.admin.achievement_modal.variable.\"+this.attrs.id());\r\n\r\n    return (\r\n      <span>\r\n          <Dropdown\r\n            label={label}\r\n            buttonClassName=\"Button Button--danger\"\r\n          >\r\n            {variables.map((g) =>\r\n              Button.component(\r\n                {\r\n                  active: this.attrs.id(),\r\n                  onclick: () => {\r\n                    this.attrs.id(g);\r\n                    const formInlineElements = document.querySelectorAll(\".FormInline\");\r\n\r\n                    if (g === \"avatar\" || g === \"manual\") {\r\n                      formInlineElements.forEach(element => {\r\n                        element.classList.add(\"FormHidden\");\r\n                      });\r\n                    } else {\r\n                      formInlineElements.forEach(element => {\r\n                        element.classList.remove(\"FormHidden\");\r\n                      });\r\n\r\n                      const inputFormInlineElements = document.querySelectorAll(\"input.FormInline\");\r\n                      inputFormInlineElements.forEach(input => {\r\n                        input.setAttribute(\"data-original-title\", app.translator.trans(\"malago-achievements.admin.achievement_modal.tooltip.\" + g));\r\n                      });\r\n                    }\r\n                  },\r\n                },\r\n                app.translator.trans(\"malago-achievements.admin.achievement_modal.variable.\" + g)\r\n              )\r\n            )}\r\n          </Dropdown>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n","/*\r\n *  Achievements Extension for Flarum\r\n *  Author: Miguel A. Lago\r\n *\r\n *  This program is free software: you can redistribute it and/or modify\r\n *  it under the terms of the GNU General Public License as published by\r\n *  the Free Software Foundation, either version 3 of the License, or\r\n *  (at your option) any later version.\r\n *\r\n *  This program is distributed in the hope that it will be useful,\r\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n *  GNU General Public License for more details.\r\n */\r\n\r\nimport Modal from \"flarum/components/Modal\";\r\nimport Button from \"flarum/components/Button\";\r\nimport Checkbox from \"flarum/components/Checkbox\";\r\nimport Tooltip from \"flarum/components/Tooltip\";\r\nimport LoadingIndicator from \"flarum/components/LoadingIndicator\";\r\nimport ItemList from \"flarum/utils/ItemList\";\r\nimport Stream from \"flarum/utils/Stream\";\r\nimport GroupSelector from \"./GroupSelector\";\r\n\r\nexport default class AchievementModal extends Modal {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n\r\n    this.achievement =\r\n      this.attrs.model || app.store.createRecord(\"achievements\");\r\n\r\n    this.id = Stream(this.achievement.data.id || \"-\");\r\n    this.name = Stream(this.achievement.name() || \"\");\r\n    this.description = Stream(this.achievement.description() || \"\");\r\n    if (this.achievement.computation()) {\r\n      var c = this.achievement.computation().split(':');\r\n      this.selected_variable = Stream(c[0])\r\n      this.computation = Stream(c[1]);\r\n\r\n      if (this.selected_variable() == \"avatar\" || this.selected_variable() == \"manual\") {\r\n        $(\".FormInline\").hide();\r\n      }\r\n    } else {\r\n      this.computation = Stream(\"\");\r\n      this.selected_variable = Stream(\"manual\");\r\n    }\r\n\r\n    this.points = Stream(this.achievement.points() || \"\");\r\n    this.image = Stream(this.achievement.image() || \"\");\r\n    this.active = Stream(this.achievement.active() || 1);\r\n    this.hidden = Stream(this.achievement.hidden() || 0);\r\n\r\n    if (this.achievement.rectangle()) {\r\n      var rectangle = this.achievement.rectangle().split(',');\r\n\r\n      this.row = Stream(rectangle[0] / rectangle[2] + 1);\r\n      this.col = Stream(rectangle[1] / rectangle[3] + 1);\r\n\r\n      this.width = Stream(rectangle[3]);\r\n      this.height = Stream(rectangle[2]);\r\n    } else {\r\n      this.row = Stream(\"1\");\r\n      this.col = Stream(\"1\");\r\n      this.width = Stream(\"\");\r\n      this.height = Stream(\"\");\r\n    }\r\n\r\n  }\r\n\r\n  className() {\r\n    return \"EditAchievementModal Modal--large\";\r\n  }\r\n\r\n  title() {\r\n    return this.name()\r\n      ? this.name() + \" ID: \" + this.id()\r\n      : app.translator.trans(\r\n        \"malago-achievements.admin.achievement_modal.title\"\r\n      );\r\n  }\r\n\r\n  content() {\r\n    if (this.loading) {\r\n      return (\r\n        <div className=\"Modal-body\">\r\n          <div className=\"Form\">\r\n            <div className=\"container\">\r\n              <LoadingIndicator />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    var all_fields = this.fields().toArray();\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form\">\r\n          <div className=\"ModalColumn\">{all_fields.slice(0, 6)}</div>\r\n          <div className=\"ModalColumn\">{all_fields.slice(6)}</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  fields() {\r\n    const items = new ItemList();\r\n\r\n    items.add(\r\n      \"name\",\r\n      <div className=\"Form-group\">\r\n        <label>\r\n          {app.translator.trans(\r\n            \"malago-achievements.admin.achievement_modal.name_label\"\r\n          )}\r\n        </label>\r\n        <input\r\n          className=\"FormControl\"\r\n          placeholder={app.translator.trans(\r\n            \"malago-achievements.admin.achievement_modal.name_placeholder\"\r\n          )}\r\n          bidi={this.name}\r\n        />\r\n      </div>,\r\n      50\r\n    );\r\n\r\n    items.add(\r\n      \"active\",\r\n      <div className=\"Form-group\">\r\n        <label>\r\n          {app.translator.trans(\r\n            \"malago-achievements.admin.achievement_modal.active_label\"\r\n          )}\r\n        </label>\r\n        {Checkbox.component(\r\n          {\r\n            state: this.active(),\r\n            onchange: () => {\r\n              this.active((this.active() + 1) % 2);\r\n            },\r\n          }\r\n        )}\r\n      </div>,\r\n      50\r\n    );\r\n\r\n    items.add(\r\n      \"hidden\",\r\n      <div className=\"Form-group\">\r\n        <label>\r\n          {app.translator.trans(\r\n            \"malago-achievements.admin.achievement_modal.hidden_label\"\r\n          )}\r\n        </label>\r\n        {Checkbox.component(\r\n          {\r\n            state: this.hidden(),\r\n            onchange: () => {\r\n              this.hidden((this.hidden() + 1) % 2);\r\n            },\r\n          }\r\n        )}\r\n      </div>,\r\n      50\r\n    );\r\n\r\n    items.add(\r\n      \"description\",\r\n      <div className=\"Form-group\">\r\n        <label>\r\n          {app.translator.trans(\r\n            \"malago-achievements.admin.achievement_modal.description_label\"\r\n          )}\r\n        </label>\r\n        <input\r\n          className=\"FormControl\"\r\n          placeholder={app.translator.trans(\r\n            \"malago-achievements.admin.achievement_modal.description_placeholder\"\r\n          )}\r\n          bidi={this.description}\r\n        />\r\n      </div>,\r\n      50\r\n    );\r\n\r\n    items.add(\r\n      \"computation\",\r\n      <div className=\"Form-group\">\r\n        <label>{app.translator.trans(\r\n          \"malago-achievements.admin.achievement_modal.variable_label\"\r\n        )}</label>\r\n        <GroupSelector\r\n          label={app.translator.trans(\r\n            \"malago-achievements.admin.achievement_modal.variable_label\"\r\n          )}\r\n          id={this.selected_variable}\r\n        ></GroupSelector>\r\n        <Tooltip id='Tooltip-computation' text=\"\">\r\n          <input\r\n            className={this.selected_variable() == \"avatar\" || this.selected_variable() == \"manual\" ? \"FormControl FormHidden FormInline\" : \"FormControl FormInline\"}\r\n            placeholder={app.translator.trans(\r\n              \"malago-achievements.admin.achievement_modal.computation_placeholder\"\r\n            )}\r\n            bidi={this.computation}\r\n            />\r\n          </Tooltip>\r\n      </div>\r\n      ,\r\n      50\r\n    );\r\n\r\n    items.add(\r\n      \"points\",\r\n      <div className=\"Form-group\">\r\n        <label>\r\n          {app.translator.trans(\r\n            \"malago-achievements.admin.achievement_modal.points_label\"\r\n          )}\r\n        </label>\r\n        <input\r\n          className=\"FormControl\"\r\n          placeholder={app.translator.trans(\r\n            \"malago-achievements.admin.achievement_modal.points_placeholder\"\r\n          )}\r\n          bidi={this.points}\r\n        />\r\n      </div>,\r\n      50\r\n    );\r\n    items.add(\r\n      \"image\",\r\n      <div className=\"Form-group\">\r\n        <label>\r\n          {app.translator.trans(\r\n            \"malago-achievements.admin.achievement_modal.image_label\"\r\n          )}\r\n        </label>\r\n        <input\r\n          className=\"FormControl\"\r\n          placeholder={app.translator.trans(\r\n            \"malago-achievements.admin.achievement_modal.image_placeholder\"\r\n          )}\r\n          bidi={this.image}\r\n          onchange={this.showImage()}\r\n        />\r\n      </div>,\r\n      50\r\n    );\r\n\r\n    items.add(\r\n      \"image-show\",\r\n      <div className=\"Form-group\">\r\n        <div class=\"AchievementImage-Show\">\r\n          &nbsp;\r\n        </div>\r\n      </div>\r\n      ,\r\n      50\r\n    );\r\n\r\n    items.add(\r\n      \"size\",\r\n      <div className=\"Form-group Image-data\">\r\n        <table className=\"AchievementModal-Table\">\r\n          <tr>\r\n            <td>\r\n              <label>\r\n                {app.translator.trans(\r\n                  \"malago-achievements.admin.achievement_modal.height_label\"\r\n                )}\r\n              </label>\r\n            </td>\r\n            <td>\r\n              <label>\r\n                {app.translator.trans(\r\n                  \"malago-achievements.admin.achievement_modal.width_label\"\r\n                )}\r\n              </label>\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td>\r\n              <input\r\n                className=\"FormControl\"\r\n                bidi={this.height}\r\n                onchange={this.showImage()}\r\n                type=\"number\"\r\n              />\r\n            </td>\r\n            <td>\r\n              <input\r\n                className=\"FormControl\"\r\n                bidi={this.width}\r\n                onchange={this.showImage()}\r\n                type=\"number\"\r\n              />\r\n            </td>\r\n          </tr>\r\n        </table>\r\n      </div>,\r\n      50\r\n    );\r\n\r\n    items.add(\r\n      \"position\",\r\n      <div className=\"Form-group Image-data\">\r\n        <table className=\"AchievementModal-Table\">\r\n          <tr>\r\n            <td>\r\n              <label>\r\n                {app.translator.trans(\r\n                  \"malago-achievements.admin.achievement_modal.row_label\"\r\n                )}\r\n              </label>\r\n            </td>\r\n            <td>\r\n              <label>\r\n                {app.translator.trans(\r\n                  \"malago-achievements.admin.achievement_modal.col_label\"\r\n                )}\r\n              </label>\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td>\r\n              <input\r\n                className=\"FormControl\"\r\n                placeholder={1}\r\n                bidi={this.col}\r\n                onchange={this.showImage()}\r\n                type=\"number\"\r\n              />\r\n            </td>\r\n            <td>\r\n              <input\r\n                className=\"FormControl\"\r\n                placeholder={1}\r\n                bidi={this.row}\r\n                onchange={this.showImage()}\r\n                type=\"number\"\r\n              />\r\n            </td>\r\n          </tr>\r\n        </table>\r\n      </div>,\r\n      50\r\n    );\r\n\r\n    items.add(\r\n      \"submit\",\r\n      <div className=\"Form-group\">\r\n        {Button.component(\r\n          {\r\n            type: \"submit\",\r\n            className: \"Button Button--primary EditAchievementModal-save\",\r\n            loading: this.loading,\r\n            disabled: this.name().length === 0,\r\n          },\r\n          app.translator.trans(\r\n            \"malago-achievements.admin.achievement_modal.submit_button\"\r\n          )\r\n        )}\r\n        {this.achievement.exists ? (\r\n          <button\r\n            type=\"button\"\r\n            className=\"Button EditAchievementsModal-delete\"\r\n            onclick={this.delete.bind(this)}\r\n          >\r\n            {app.translator.trans(\r\n              \"malago-achievements.admin.achievement_modal.delete_button\"\r\n            )}\r\n          </button>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </div>,\r\n      -10\r\n    );\r\n\r\n    return items;\r\n  }\r\n\r\n  showImage() {\r\n\r\n    const image = this.image();\r\n    const achievementImageShow = document.querySelector(\".AchievementImage-Show\");\r\n    const imageData = document.querySelector(\".Image-data\");\r\n\r\n    if (achievementImageShow && imageData) {\r\n      if (image.includes(\"http\")) {\r\n        achievementImageShow.innerHTML = \"\";\r\n        imageData.style.display = \"block\";\r\n        achievementImageShow.style.backgroundSize = \"cover\";\r\n        achievementImageShow.style.backgroundRepeat = \"no-repeat\";\r\n        achievementImageShow.style.backgroundPosition =\r\n          `-${(this.row() - 1) * this.height()}px -${(this.col() - 1) * this.width()}px`;\r\n        achievementImageShow.style.backgroundImage = `url(${image})`;\r\n        achievementImageShow.style.width = `${this.width()}px`;\r\n        achievementImageShow.style.height = `${this.height()}px`;\r\n      } else {\r\n        achievementImageShow.innerHTML = `<i class='icon ${image}'></i>`;\r\n        achievementImageShow.style.background = \"none\";\r\n        achievementImageShow.style.height = \"32px\";\r\n        achievementImageShow.style.width = \"32px\";\r\n        imageData.style.display = \"none\";\r\n      }\r\n    }\r\n  }\r\n\r\n  submitData() {\r\n    const data = {\r\n      name: this.name(),\r\n      description: this.description(),\r\n      computation: this.selected_variable() + \":\" + this.computation(),\r\n      points: this.points(),\r\n      image: this.image(),\r\n      rectangle: [(this.row() - 1) * this.height(), (this.col() - 1) * this.width(), this.height(), this.width()].join(','),\r\n      active: this.active(),\r\n      hidden: this.hidden()\r\n    };\r\n\r\n    return data;\r\n  }\r\n\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n\r\n    this.loading = true;\r\n\r\n    this.achievement.save(this.submitData()).then(\r\n      () => this.hide(),\r\n      () => (this.loading = false)\r\n    );\r\n  }\r\n\r\n  delete() {\r\n    if (\r\n      confirm(\r\n        app.translator.trans(\r\n          \"malago-achievements.admin.achievement_modal.delete_confirmation\"\r\n        )\r\n      )\r\n    ) {\r\n      this.achievement.delete().then(() => {\r\n        m.redraw();\r\n      });\r\n\r\n      this.hide();\r\n    }\r\n  }\r\n}\r\n","/*\r\n *  Achievements Extension for Flarum\r\n *  Author: Miguel A. Lago\r\n *\r\n *  This program is free software: you can redistribute it and/or modify\r\n *  it under the terms of the GNU General Public License as published by\r\n *  the Free Software Foundation, either version 3 of the License, or\r\n *  (at your option) any later version.\r\n *\r\n *  This program is distributed in the hope that it will be useful,\r\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n *  GNU General Public License for more details.\r\n */\r\n\r\nimport Modal from \"flarum/components/Modal\";\r\nimport Button from \"flarum/components/Button\";\r\nimport LoadingIndicator from \"flarum/components/LoadingIndicator\";\r\nimport ItemList from \"flarum/utils/ItemList\";\r\nimport Stream from \"flarum/utils/Stream\";\r\n\r\n\r\nexport default class AchievementUserModal extends Modal {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n    \r\n    this.achievement = this.attrs.model;\r\n    this.achievement_user = app.store.createRecord(\"achievement_user\")\r\n\r\n    this.name = Stream(this.achievement.name() || \"\");\r\n    this.id = Stream(this.achievement.data.id || \"\");\r\n\r\n    this.user_id = Stream(\"\");\r\n\r\n  }\r\n\r\n  className() {\r\n    return \"EditAchievementModal Modal--small\";\r\n  }\r\n\r\n  title() {\r\n    return this.name()\r\n      ? this.name()\r\n      : app.translator.trans(\r\n          \"malago-achievements.admin.achievement_modal.add_delete_title\"\r\n        );\r\n  }\r\n\r\n  content() {\r\n    if (this.loading) {\r\n      return (\r\n        <div className=\"Modal-body\">\r\n          <div className=\"Form\">\r\n            <div className=\"container\">\r\n              <LoadingIndicator />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form\">{this.fields().toArray()}</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  fields() {\r\n    const items = new ItemList();\r\n    items.add(\r\n      \"instructions\",\r\n      <div className=\"Form-group\">\r\n          <p>{app.translator.trans(\r\n                \"malago-achievements.admin.achievement_modal.add_delete_instructions\"\r\n            )}</p>\r\n      </div>,\r\n      50\r\n      );\r\n    items.add(\r\n        \"user_id\",\r\n        <div className=\"Form-group\">\r\n            <label>\r\n            {app.translator.trans(\r\n                \"malago-achievements.admin.achievement_modal.username\"\r\n            )}\r\n            </label>\r\n            <input\r\n            className=\"FormControl\"\r\n            placeholder={app.translator.trans(\r\n                \"malago-achievements.admin.achievement_modal.username_placeholder\"\r\n            )}\r\n            bidi={this.user_id}\r\n            />\r\n        </div>,\r\n        50\r\n        );\r\n\r\n    items.add(\r\n      \"submit\",\r\n      <div className=\"Form-group\">\r\n        {Button.component(\r\n          {\r\n            type: \"submit\",\r\n            className: \"Button Button--primary EditAchievementModal-save\",\r\n            loading: this.loading,\r\n            disabled: this.name().length === 0,\r\n          },\r\n          app.translator.trans(\r\n            \"malago-achievements.admin.achievement_modal.submit_button\"\r\n          )\r\n        )}\r\n        \r\n      </div>,\r\n      -10\r\n    );\r\n\r\n    return items;\r\n  }\r\n\r\n  submitData() {\r\n    const data = {\r\n      id: this.id(),\r\n      user_id: this.user_id(),\r\n      new:1,\r\n    };\r\n\r\n    return data;\r\n  }\r\n\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n\r\n    this.loading = true;\r\n\r\n    if (this.user_id()!=\"\"){\r\n      this.achievement_user.save(this.submitData()).then(\r\n        () => this.hide(),\r\n        () => (this.loading = false)\r\n      );\r\n    }\r\n  }\r\n\r\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/saveSettings'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Switch'];","/*\r\n *  Achievements Extension for Flarum\r\n *  Author: Miguel A. Lago\r\n *\r\n *  This program is free software: you can redistribute it and/or modify\r\n *  it under the terms of the GNU General Public License as published by\r\n *  the Free Software Foundation, either version 3 of the License, or\r\n *  (at your option) any later version.\r\n *\r\n *  This program is distributed in the hope that it will be useful,\r\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n *  GNU General Public License for more details.\r\n */\r\n\r\nimport ExtensionPage from \"flarum/components/ExtensionPage\";\r\nimport LoadingIndicator from \"flarum/components/LoadingIndicator\";\r\nimport icon from \"flarum/helpers/icon\";\r\nimport AchievementModal from \"./AchievementModal\";\r\nimport AchievementUserModal from \"./AchievementUserModal\";\r\nimport saveSettings from \"flarum/utils/saveSettings\";\r\nimport Stream from 'flarum/utils/Stream';\r\nimport Switch from 'flarum/components/Switch';\r\nimport Button from \"flarum/components/Button\";\r\n\r\nfunction AchievementsItem(achievement) {\r\n\r\n  const name = achievement\r\n    ? achievement.name()\r\n    : app.translator.trans(\r\n      \"malago-achievements.admin.achievements_page.create_achievement_button\"\r\n    );\r\n  const rectangle = (achievement ? achievement.rectangle() : \"0,0,32,32\").split(',')\r\n\r\n  var iconName = achievement ? \"\" : icon(\"fas fa-plus\");\r\n\r\n  const addString = app.translator.trans(\"malago-achievements.admin.achievements_page.add_delete_users\")\r\n\r\n  var style = \"background:none;\\\r\n      height:32px;\\\r\n      width:32px;\";\r\n\r\n  if (achievement)\r\n    if (achievement.image().includes(\"http\")) {\r\n      style = \"background:url(\" + achievement.image() + \");\\\r\n      background-position:-\"+ rectangle[0] + \"px -\" + rectangle[1] + \"px;\\\r\n      height:\"+ rectangle[2] + \"px;\\\r\n      width:\"+ rectangle[3] + \"px;\";\r\n    } else {\r\n      iconName = icon(achievement.image());\r\n    }\r\n  return (\r\n    <div\r\n      className=\"ExtensionListItem\"\r\n    >\r\n      <span className=\"ExtensionListItem-icon ExtensionIcon Achievement\" style={style} onclick={() => app.modal.show(AchievementModal, { model: achievement })}>\r\n        {iconName}</span>\r\n      <span className=\"ExtensionListItem-title\">{name}</span>\r\n      <span className=\"ExtensionListItem-user\" data-toggle='tooltip' title={addString} onclick={() => achievement ? app.modal.show(AchievementUserModal, { model: achievement }) : null}><i class=\"fas fa-users-cog\"></i></span>\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nexport default class AchievementsPage extends ExtensionPage {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n\r\n    const settings = app.data.settings;\r\n    this.values = {};\r\n\r\n    this.settingsPrefix = \"malago-achievements\";\r\n\r\n    this.settings = [\r\n      'show-post-footer',\r\n      'show-user-card',\r\n      'link-left-column'\r\n    ];\r\n\r\n    this.settings.forEach((key) => (this.values[key] = Stream(Number(settings[this.addPrefix(key)]))));\r\n\r\n    this.loading = true;\r\n\r\n    app.store.find(\"achievements\").then(() => {\r\n      this.loading = false;\r\n      m.redraw();\r\n    });\r\n\r\n  }\r\n  content() {\r\n    if (this.loading) {\r\n      return (\r\n        <div className=\"Achievements\">\r\n          <div className=\"container\">\r\n            <LoadingIndicator />\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"Achievements\">\r\n        <div className=\"container\">\r\n          <div className=\"ExtensionsWidget-list Achievements-list\">\r\n            <p className=\"Achievements-list-heading\">\r\n              {app.translator.trans(\r\n                \"malago-achievements.admin.achievements_page.list_heading\"\r\n              )}\r\n            </p>\r\n            <div className=\"ExtensionList AchievementListAdmin\">\r\n              {[\r\n                ...app.store.all(\"achievements\").map(AchievementsItem),\r\n                AchievementsItem(),\r\n              ]}\r\n            </div>\r\n          </div>\r\n          <p className=\"Achievements-list-heading\">\r\n              {app.translator.trans(\r\n                \"malago-achievements.admin.achievements_page.show\"\r\n              )}\r\n            </p>\r\n          {\r\n            m('form', {onsubmit: this.onsubmit.bind(this)},\r\n              m('fieldset', {className: 'Achievements-settings'}, [\r\n                Switch.component(\r\n                  {\r\n                      state: this.values['show-post-footer']() || false,\r\n                      onchange: this.values['show-post-footer'],\r\n                  },\r\n                  app.translator.trans('malago-achievements.admin.settings.show-post-footer')\r\n                ),\r\n                Switch.component(\r\n                  {\r\n                      state: this.values['show-user-card']() || false,\r\n                      onchange: this.values['show-user-card'],\r\n                  },\r\n                  app.translator.trans('malago-achievements.admin.settings.show-user-card')\r\n                ),\r\n                Switch.component(\r\n                  {\r\n                      state: this.values['link-left-column']() || false,\r\n                      onchange: this.values['link-left-column'],\r\n                  },\r\n                  app.translator.trans('malago-achievements.admin.settings.link-left-column')\r\n                ),\r\n                  Button.component({\r\n                    type: 'submit',\r\n                    className: 'Button Button--primary',\r\n                    disabled: !this.changed()\r\n                }, app.translator.trans('malago-achievements.admin.achievement_modal.submit_button')),\r\n              ])\r\n            )\r\n          }\r\n          <div className=\"Achievements-footer\">\r\n            <p className=\"Achievements-list-heading\">\r\n              {app.translator.trans(\r\n                \"malago-achievements.admin.achievements_page.instructions_header\"\r\n              )}\r\n            </p>\r\n            <ul>\r\n              {app.translator.trans(\r\n                \"malago-achievements.admin.achievements_page.instructions_text\"\r\n              )}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  /**\r\n     * Checks if the values of the fields and checkboxes are different from\r\n     * the ones stored in the database\r\n     *\r\n     * @returns boolean\r\n     */\r\n  changed() {\r\n    const settingsChecked = this.settings.some(key => this.values[key]() !== app.data.settings[this.addPrefix(key)]);\r\n    return settingsChecked;\r\n  }\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n    // if the page is already saving, do nothing\r\n    if (this.loading) return;\r\n\r\n    // prevents multiple savings\r\n    this.loading = true;\r\n\r\n    // remove previous success popup\r\n    app.alerts.dismiss(this.successAlert);\r\n\r\n    const settings = {};\r\n\r\n    // gets all the values from the form\r\n    this.settings.forEach(key => settings[this.addPrefix(key)] = this.values[key]());\r\n    saveSettings(settings)\r\n      .then(() => {\r\n          // on success, show popup\r\n          app.alerts.show({ type: 'success' }, app.translator.trans('core.admin.settings.saved_message'));\r\n      })\r\n      .catch(() => {\r\n      })\r\n      .then(() => {\r\n          // return to the initial state and redraw the page\r\n          this.loading = false;\r\n          // window.location.reload();\r\n      });\r\n  }\r\n  addPrefix(key) {\r\n      return this.settingsPrefix + '.' + key;\r\n  }\r\n}\r\n","import app from 'flarum/admin/app';\r\n\r\nimport registerModels from \"../common/registerModels\";\r\nimport AchievementsPage from \"./components/AchievementsPage\";\r\n\r\napp.initializers.add(\"justoverclock/flachievements\", () => {\r\n  app.extensionData\r\n    .for(\"justoverclock-flachievements\")\r\n    .registerPage(AchievementsPage);\r\n\r\n  registerModels();\r\n});\r\n","/*\r\n *  Achievements Extension for Flarum\r\n *  Author: Miguel A. Lago\r\n *\r\n *  This program is free software: you can redistribute it and/or modify\r\n *  it under the terms of the GNU General Public License as published by\r\n *  the Free Software Foundation, either version 3 of the License, or\r\n *  (at your option) any later version.\r\n *\r\n *  This program is distributed in the hope that it will be useful,\r\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n *  GNU General Public License for more details.\r\n */\r\n\r\nimport Model from \"flarum/Model\";\r\nimport User from \"flarum/models/User\";\r\nimport Achievement from \"./models/Achievement\";\r\nimport AchievementUser from \"./models/AchievementUser\";\r\n\r\nexport default function registerModels() {\r\n  User.prototype.achievements = Model.hasMany('achievements','achievement_user');\r\n  User.prototype.achievement_user = Model.hasMany('achievement_user');\r\n\r\n  app.store.models.achievements = Achievement;\r\n  app.store.models.achievement_user = AchievementUser;\r\n}"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","_inheritsLoose","create","constructor","Achievement","_Model","apply","arguments","Model","assign","id","name","description","computation","points","rectangle","image","new","active","hidden","AchievementUser","achievement_id","user_id","GroupSelector","_Component","_proto","oninit","vnode","oncreate","view","_this","label","app","trans","this","attrs","m","Dropdown","buttonClassName","map","g","Button","onclick","formInlineElements","document","querySelectorAll","forEach","element","classList","add","remove","input","setAttribute","Component","AchievementModal","_Modal","achievement","model","store","createRecord","Stream","data","c","split","selected_variable","$","hide","row","col","width","height","className","title","translator","content","loading","LoadingIndicator","all_fields","fields","toArray","slice","items","ItemList","placeholder","bidi","Checkbox","state","onchange","Tooltip","text","showImage","class","type","disabled","length","exists","achievementImageShow","querySelector","imageData","includes","innerHTML","style","display","backgroundSize","backgroundRepeat","backgroundPosition","backgroundImage","background","submitData","join","onsubmit","_this2","preventDefault","save","then","confirm","redraw","Modal","AchievementUserModal","achievement_user","AchievementsItem","iconName","icon","addString","modal","show","AchievementsPage","_ExtensionPage","settings","values","settingsPrefix","Number","addPrefix","find","concat","all","Switch","changed","some","_this3","alerts","dismiss","successAlert","saveSettings","ExtensionPage","registerPage","User","achievements","models"],"sourceRoot":""}